<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>AIDocMate – Demo</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 24px; max-width: 900px; }
		section { margin-bottom: 24px; }
		textarea { width: 100%; height: 160px; }
		pre { background: #f6f8fa; padding: 12px; white-space: pre-wrap; }
		label { display: block; margin: 8px 0; }
		button { margin-top: 8px; }
	</style>
</head>
<body>
	<h1>AIDocMate – Local Demo</h1>
	<p>Backend must be running at <code>http://127.0.0.1:8000</code>.</p>

	<section>
		<h2>1) Upload (OCR)</h2>
		<input type="file" id="fileInput" accept="image/*,.pdf" />
		<label><input type="checkbox" id="useVision" /> Use Google Vision</label>
		<label>Language hint: <input type="text" id="langHint" placeholder="en or hi" /></label>
		<button id="btnUpload">Upload & Extract</button>
		<pre id="ocrOut"></pre>
	</section>

	<section>
		<h2>2) Simplify</h2>
		<label>Language: <input type="text" id="simpLang" value="en" /></label>
		<label>Reading level: <input type="text" id="simpLevel" value="basic" /></label>
		<label><input type="checkbox" id="simpBullets" checked /> Use bullet points</label>
		<button id="btnSimplify">Simplify</button>
		<pre id="simpOut"></pre>
	</section>

	<section>
		<h2>3) Checklist</h2>
		<label>Document type: <input type="text" id="docType" value="Scholarship Application" /></label>
		<label>Context: <input type="text" id="ctx" value="student" /></label>
		<button id="btnChecklist">Generate Checklist</button>
		<pre id="chkOut"></pre>
	</section>

	<section>
		<h2>4) Translate</h2>
		<label>Target language: <input type="text" id="trgLang" value="hi" /></label>
		<button id="btnTranslate">Translate</button>
		<pre id="trOut"></pre>
	</section>

	<script>
	const API = 'http://127.0.0.1:8000';
	let rawText = '';
	let simplifiedText = '';

	document.getElementById('btnUpload').onclick = async () => {
		const file = document.getElementById('fileInput').files[0];
		if (!file) return alert('Choose a file');
		const q = new URLSearchParams();
		q.set('use_vision', document.getElementById('useVision').checked);
		const hint = document.getElementById('langHint').value.trim();
		if (hint) q.set('language_hint', hint);
		const form = new FormData();
		form.append('file', file);
		try {
			const res = await fetch(`${API}/upload?${q.toString()}`, { method: 'POST', body: form });
			const json = await res.json();
			rawText = json.text || '';
			document.getElementById('ocrOut').textContent = rawText || 'No text extracted.';
		} catch (e) {
			document.getElementById('ocrOut').textContent = 'Upload failed.';
		}
	};

	document.getElementById('btnSimplify').onclick = async () => {
		if (!rawText) return alert('Run OCR first');
		const body = {
			text: rawText,
			language: document.getElementById('simpLang').value || 'en',
			reading_level: document.getElementById('simpLevel').value || 'basic',
			use_bullets: document.getElementById('simpBullets').checked,
		};
		try {
			const res = await fetch(`${API}/simplify`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
			const json = await res.json();
			simplifiedText = json.text || '';
			document.getElementById('simpOut').textContent = simplifiedText || 'No summary produced.';
		} catch (e) {
			document.getElementById('simpOut').textContent = 'Simplify failed.';
		}
	};

	document.getElementById('btnChecklist').onclick = async () => {
		if (!rawText) return alert('Run OCR first');
		const body = {
			text: rawText,
			document_type: document.getElementById('docType').value,
			context: document.getElementById('ctx').value,
		};
		try {
			const res = await fetch(`${API}/checklist`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
			const json = await res.json();
			document.getElementById('chkOut').textContent = JSON.stringify(json.items || [], null, 2);
		} catch (e) {
			document.getElementById('chkOut').textContent = 'Checklist failed.';
		}
	};

	document.getElementById('btnTranslate').onclick = async () => {
		const source = simplifiedText || rawText;
		if (!source) return alert('Run OCR or Simplify first');
		const body = { text: source, target_language: document.getElementById('trgLang').value || 'hi' };
		try {
			const res = await fetch(`${API}/translate`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });
			const json = await res.json();
			document.getElementById('trOut').textContent = json.text || 'No translation produced.';
		} catch (e) {
			document.getElementById('trOut').textContent = 'Translate failed.';
		}
	};
	</script>
</body>
</html> 